# Data Manifest

This document provides a central inventory of all data sources, configuration files, and data pipelines used in the Citizen Budget Lab application.

## 1. Core Budget & Policy Data

### 1.1. LEGO Pieces (Budget Building Blocks)

*   **Purpose:** Defines the granular, user-facing "pieces" for both expenditures and revenues. This is the foundational layer for the budget builder. Each piece has a human-readable label, a description, and a mapping to official economic classifications.
*   **Source File:** `data/lego_pieces.json`
*   **Status:** **Exists and is well-populated.** Contains over 30 expenditure and 15 revenue pieces.
*   **Pipeline:** This file is a primary input for the `lego` cache warmer (`services/api/cache_warm.py`) which uses the mappings to fetch baseline amounts from Eurostat.

### 1.2. LEGO Baseline (Budget Data)

*   **Purpose:** Provides the actual monetary values for a given year for all LEGO pieces. This is the data that populates the treemap and all budget displays.
*   **Source File:** `data/cache/lego_baseline_{YEAR}.json` (e.g., `lego_baseline_2025.json`)
*   **Status:** **Mechanism exists, but data must be generated per year.** The project contains sample data, but for a specific year like 2025, the warmer must be run.
*   **Pipeline:** Generated by `make warm-all YEAR=<year>` which executes the `lego` command in `services/api/cache_warm.py`. This script fetches data from Eurostat's SDMX API based on the mappings in `lego_pieces.json`.

### 1.3. Policy Levers (Reform Catalog)

*   **Purpose:** Defines the list of concrete, named policy reforms available in the "Policy Workshop". Each lever has a fixed, pre-estimated budgetary impact.
*   **Source File:** `services/api/policy_catalog.py`
*   **Status:** **Exists, but sparsely populated.** Contains a few examples.
*   **Pipeline:** This is a static Python file. To add more reforms, this file must be edited manually with data from credible sources (e.g., government reports, economic analyses).

### 1.4. Revenue Splits

*   **Purpose:** Defines the rules for splitting high-level revenue categories (like VAT or Income Tax) into more granular LEGO pieces.
*   **Source File:** `data/revenue_splits.json`
*   **Status:** **Exists and is functional.**
*   **Pipeline:** Used by the `lego` cache warmer to correctly calculate the baseline amounts for revenue pieces.

## 2. User Experience & Labeling Data

### 2.1. Mass Labels (Treemap Categories)

*   **Purpose:** Provides user-friendly names, descriptions, and examples for the high-level budget "masses" (COFOG categories) shown in the treemap.
*   **Source File:** `data/ux_labels.json`
*   **Status:** **Exists and is complete.**
*   **Pipeline:** Read directly by the API to enrich UI components.

### 2.2. Popular Intents (Starting Points)

*   **Purpose:** Provides curated, popular starting points or "intents" for users (e.g., "Hire more nurses"). These are designed as UX shortcuts that seed a target or reform in the builder, simplifying the user journey. While they overlap with the Policy Catalog, they serve a distinct UX purpose: to guide users who don't know where to start, whereas the full catalog is for detailed specification.
*   **Source File:** `data/intents.json`
*   **Status:** **Exists, with a few examples.** Can be expanded.
*   **Pipeline:** Read directly by the API to populate the "Popular Intents" UI component.

## 3. Supporting & Technical Data

### 3.1. COFOG Mapping

*   **Purpose:** Maps French administrative budget codes (missions, programmes) to the international COFOG classification.
*   **Source File:** `data/cofog_mapping.json`
*   **Status:** **Exists and is functional.**
*   **Pipeline:** Used by the `dbt` project (`tools/build_seeds.py`) to create the `dim_cofog_mapping` seed for the data warehouse, and by the API as a fallback.

### 3.2. Macroeconomic Assumptions (IRFs)

*   **Purpose:** Stores the Impulse Response Functions (IRFs) used by the "Macro Kernel" to estimate the impact of budget changes on GDP and employment.
*   **Source File:** `data/macro_irfs.json`
*   **Status:** **Exists, with placeholder values.** The model is functional but relies on illustrative data.
*   **Pipeline:** Read by the `runScenario` mutation in the API.

### 3.3. Baseline Projections

*   **Purpose:** Provides the baseline multi-year path for core metrics like GDP, deficit, and debt.
*   **Source Files:** `data/gdp_series.csv`, `data/baseline_deficit_debt.csv`
*   **Status:** **Exists, with sample data.**
*   **Pipeline:** Read by the `runScenario` mutation to calculate compliance and macro paths.
